{"ast":null,"code":"import _slicedToArray from\"/home/sfn/react-news-feed/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useEffect,useState}from\"react\";import{useDispatch,useSelector}from'react-redux';import{BrowserRouter,Route,Routes}from\"react-router-dom\";import axios from\"axios\";import API_URL from'../config';import{useAuth}from\"../Hooks/useAuth\";import AuthContext from\"../Contexts/AuthContext\";import Home from\"./Home\";import SignIn from\"../Auth/SignIn\";import SignUp from\"../Auth/SignUp\";import Header from\"../Layouts/Header\";import Footer from\"../Layouts/Footer\";import{fetchArticles,updateArticle,fetchCategories,setSearchByText,fetchTotal}from'../Redux/actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){axios.defaults.withCredentials=true;var _useAuth=useAuth(),userData=_useAuth.userData;var _useState=useState({signedIn:userData.signedIn,user:userData.user}),_useState2=_slicedToArray(_useState,2),authData=_useState2[0],setAuthData=_useState2[1];var dispatch=useDispatch();var articles=useSelector(function(state){return state.articles;});var categories=useSelector(function(state){return state.categories;});var textSearch=useSelector(function(state){return state.textSearch;});var total=useSelector(function(state){return state.total;});var fetchData=useCallback(function(){axios.get([API_URL]+'/api/news',{withCredentials:false}).then(function(article_response){console.log(article_response.data['total']);dispatch(fetchArticles(article_response.data['results'].original));dispatch(fetchTotal(article_response.data['total']));}).catch(function(error){console.error('Error fetching articles:',error);});axios.get([API_URL]+'/api/categories',{withCredentials:false}).then(function(categories_response){dispatch(fetchCategories(categories_response.data));}).catch(function(error){console.error('Error fetching categories:',error);});},[]);var fetchNewsByCategory=useCallback(function(category){axios.get(\"<span class=\\\"math-inline\\\">{API_URL}/api/news?category=</span>{category}\",{withCredentials:false}).then(function(article_response){dispatch(fetchArticles(article_response.data['results']));dispatch(fetchTotal(article_response.data['total']));}).catch(function(error){console.error('Error fetching articles:',error);});},[dispatch]);var searchByText=useCallback(function(searchQuery){axios.get(\"\".concat(API_URL,\"/api/news?\"),{params:{search_query:searchQuery}},{withCredentials:true}).then(function(article_response){dispatch(fetchArticles(article_response.data['results']));dispatch(fetchTotal(article_response.data['total']));}).catch(function(error){console.error('Error fetching articles:',error);});},[dispatch]);useEffect(function(){fetchData();},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{authData:authData,setAuthData:setAuthData},children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{categories:categories,fetchNewsByCategory:fetchNewsByCategory,searchByText:[setSearchByText,searchByText]}),/*#__PURE__*/_jsx(Home,{articles:articles,totalItems:total}),/*#__PURE__*/_jsx(Footer,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/signIn\",element:/*#__PURE__*/_jsx(SignIn,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signUp\",element:/*#__PURE__*/_jsx(SignUp,{})})]})});}export default App;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useDispatch","useSelector","BrowserRouter","Route","Routes","axios","API_URL","useAuth","AuthContext","Home","SignIn","SignUp","Header","Footer","fetchArticles","updateArticle","fetchCategories","setSearchByText","fetchTotal","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","defaults","withCredentials","_useAuth","userData","_useState","signedIn","user","_useState2","_slicedToArray","authData","setAuthData","dispatch","articles","state","categories","textSearch","total","fetchData","get","then","article_response","console","log","data","original","catch","error","categories_response","fetchNewsByCategory","category","searchByText","searchQuery","concat","params","search_query","Provider","value","children","path","element","totalItems"],"sources":["/home/sfn/react-news-feed/src/Components/App.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport {useDispatch, useSelector } from 'react-redux';\nimport { BrowserRouter, Route, Routes } from \"react-router-dom\";\nimport axios from \"axios\";\n\nimport API_URL from '../config';\nimport {useAuth} from \"../Hooks/useAuth\";\nimport AuthContext from \"../Contexts/AuthContext\";\n\nimport Home from \"./Home\";\nimport SignIn from \"../Auth/SignIn\";\nimport SignUp from \"../Auth/SignUp\";\nimport Header from \"../Layouts/Header\";\nimport Footer from \"../Layouts/Footer\";\n\nimport {\n  fetchArticles,\n  updateArticle,\n  fetchCategories,\n  setSearchByText,\n  fetchTotal\n} from '../Redux/actions';\n\nfunction App() {\n  axios.defaults.withCredentials = true;  \n  const {userData} = useAuth();\n  const [authData, setAuthData] = useState({signedIn: userData.signedIn, user: userData.user});\n\n  const dispatch = useDispatch();\n  const articles = useSelector((state) => state.articles);\n  const categories = useSelector((state) => state.categories);\n  const textSearch = useSelector((state) => state.textSearch);\n  const total = useSelector((state) => state.total);\n\n  const fetchData = useCallback(() => {\n    axios\n      .get([API_URL]+'/api/news', { withCredentials: false })\n      .then((article_response) => {\n        console.log(article_response.data['total'])\n        dispatch(fetchArticles(article_response.data['results'].original));\n        dispatch(fetchTotal(article_response.data['total']));\n      })\n      .catch((error) => {\n        console.error('Error fetching articles:', error);\n      });\n\n    axios\n      .get([API_URL]+'/api/categories', { withCredentials: false })\n      .then((categories_response) => {\n        dispatch(fetchCategories(categories_response.data));\n      })\n      .catch((error) => {\n        console.error('Error fetching categories:', error);\n      });\n  }, []);\n\n  const fetchNewsByCategory = useCallback((category) => {\n    axios\n      .get(`<span class=\"math-inline\">\\{API\\_URL\\}/api/news?category\\=</span>{category}`, { withCredentials: false })\n      .then((article_response) => {\n        dispatch(fetchArticles(article_response.data['results']));\n        dispatch(fetchTotal(article_response.data['total']));\n      })\n      .catch((error) => {\n        console.error('Error fetching articles:', error);\n      });\n  }, [dispatch]);\n\n  const searchByText = useCallback((searchQuery) => {\n    axios\n      .get(`${API_URL}/api/news?`,{\n        params: {\n          search_query: searchQuery,\n        },\n      }, { withCredentials: true })\n      .then((article_response) => {\n        dispatch(fetchArticles(article_response.data['results']));\n        dispatch(fetchTotal(article_response.data['total']));\n      })\n      .catch((error) => {\n        console.error('Error fetching articles:', error);\n      });\n  }, [dispatch]);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n\n  return (\n      <AuthContext.Provider value={{authData, setAuthData }}>\n        <Routes>\n          <Route\n            path=\"/\"\n            element={\n              <>\n                <Header\n                  categories={categories}\n                  fetchNewsByCategory={fetchNewsByCategory}\n                  searchByText={[setSearchByText, searchByText]}\n                />\n                <Home articles={articles} totalItems={total} />\n                <Footer />\n              </>\n            }\n          />\n          <Route path=\"/signIn\" element={<SignIn />} />\n          <Route path=\"/signUp\" element={<SignUp />} />\n          {/* Add your other routes here */}\n        </Routes>\n      </AuthContext.Provider>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}