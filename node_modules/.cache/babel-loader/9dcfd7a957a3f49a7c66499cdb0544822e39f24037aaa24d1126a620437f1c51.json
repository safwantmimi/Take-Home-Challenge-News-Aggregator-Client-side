{"ast":null,"code":"import _slicedToArray from\"/home/sfn/react-news-feed/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState}from'react';import'./auth.css';import API_URL from'../config';import{useForm}from\"../Hooks/useForm\";import axios from\"axios\";import{MDBBtn,MDBContainer,MDBRow,MDBCol,MDBCard,MDBCardBody,MDBInput,MDBCheckbox,MDBIcon}from'mdb-react-ui-kit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignIn(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),rememberMe=_useState6[0],setRememberMe=_useState6[1];{/* \n  const handleSignIn = () => {\n    // Prepare the login data object\n    const loginData = {\n      email,\n      password,\n      rememberMe\n    };\n  \n    // Send the login request to the API\n    fetch(API_URL+'/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(loginData)\n    })\n      .then(response => response.json())\n      .then(data => {\n        // Check the response from the API\n        if (data.token) {\n          // Authentication successful, save the token to local storage\n          localStorage.setItem('token', data.token);\n          // Redirect to home page or desired route\n          window.location.href = '/home';\n        } else {\n          // Authentication failed, handle the error (e.g., display an error message)\n          console.error('Login failed:', data.error);\n        }\n      })\n      .catch(error => {\n        console.error('An error occurred:', error);\n      });\n  };\n  \n*/}var _useForm=useForm(),setErrors=_useForm.setErrors,renderFieldError=_useForm.renderFieldError,message=_useForm.message,setMessage=_useForm.setMessage,navigate=_useForm.navigate;var handleSignIn=function handleSignIn(e){e.preventDefault();setErrors(null);setMessage('');// make request first to sanctum/csrf-cookie\naxios.get(API_URL+'/sanctum/csrf-cookie',{withCredentials:false}).then(function(){var payload={email:email,password:password};if(rememberMe){payload.remember=true;}//axios.defaults.withCredentials = true;\naxios.post(API_URL+'/api/login',payload).then(function(response){axios.post(API_URL+'/api/me').then(function(user){console.log(user);});if(response.data.user){alert('Login success');navigate(from,{replace:true});}}).catch(function(error){console.log(error);if(error.response){if(error.response.data.message){setMessage(error.response.data.message);}if(error.response.data.errors){setErrors(error.response.data.errors);}}});});};return/*#__PURE__*/_jsx(MDBContainer,{fluid:true,className:\"p-4 background-radial-gradient overflow-hidden\",children:/*#__PURE__*/_jsxs(MDBRow,{children:[/*#__PURE__*/_jsxs(MDBCol,{md:\"6\",className:\"text-center text-md-start d-flex flex-column justify-content-center\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"my-5 display-3 fw-bold ls-tight px-3\",style:{color:'hsl(218, 81%, 95%)'},children:[\"The best offer \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:{color:'hsl(218, 81%, 75%)'},children:\"for your business\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"px-3\",style:{color:'hsl(218, 81%, 85%)'},children:\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet, itaque accusantium odio, soluta, corrupti aliquam quibusdam tempora at cupiditate quis eum maiores libero veritatis? Dicta facilis sint aliquid ipsum atque?\"})]}),/*#__PURE__*/_jsxs(MDBCol,{md:\"6\",className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"radius-shape-1\",className:\"position-absolute rounded-circle shadow-5-strong\"}),/*#__PURE__*/_jsx(\"div\",{id:\"radius-shape-2\",className:\"position-absolute shadow-5-strong\"}),/*#__PURE__*/_jsxs(MDBCard,{className:\"my-5 bg-glass\",children:[/*#__PURE__*/_jsx(MDBRow,{children:/*#__PURE__*/_jsx(MDBCol,{children:message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:message})})}),/*#__PURE__*/_jsxs(MDBCardBody,{className:\"p-5\",children:[/*#__PURE__*/_jsx(MDBInput,{wrapperClass:\"mb-4\",label:\"Email\",id:\"form3\",type:\"email\",required:true,autoComplete:\"email\",value:email,autoFocus:true,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(MDBInput,{wrapperClass:\"mb-4\",label:\"Password\",id:\"form4\",type:\"password\",required:true,autoComplete:\"current-password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mx-4 mb-4\",children:[/*#__PURE__*/_jsx(MDBCheckbox,{name:\"flexCheck\",value:rememberMe,onChange:function onChange(e){return setRememberMe(e.target.value);},id:\"flexCheckDefault\",label:\"Remember me\"}),/*#__PURE__*/_jsx(\"a\",{href:\"!#\",children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(MDBBtn,{className:\"w-100 mb-4\",size:\"md\",onClick:handleSignIn,children:\"sign in\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex text-center justify-content-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Need to create account ? \"}),/*#__PURE__*/_jsx(MDBBtn,{tag:\"a\",href:\"/SignUp\",color:\"none\",className:\"mx-3\",style:{color:'#1266f1'},children:\"Sign Up\"})]})]})]})]})]})});}export default SignIn;","map":{"version":3,"names":["React","useState","API_URL","useForm","axios","MDBBtn","MDBContainer","MDBRow","MDBCol","MDBCard","MDBCardBody","MDBInput","MDBCheckbox","MDBIcon","jsx","_jsx","jsxs","_jsxs","SignIn","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","rememberMe","setRememberMe","_useForm","setErrors","renderFieldError","message","setMessage","navigate","handleSignIn","e","preventDefault","get","withCredentials","then","payload","remember","post","response","user","console","log","data","alert","from","replace","catch","error","errors","fluid","className","children","md","style","color","id","wrapperClass","label","type","required","autoComplete","value","autoFocus","onChange","target","name","href","size","onClick","tag"],"sources":["/home/sfn/react-news-feed/src/Auth/SignIn.js"],"sourcesContent":["import {React, useState} from 'react';\nimport './auth.css';\nimport API_URL from '../config';\nimport {useForm} from \"../Hooks/useForm\";\nimport axios from \"axios\";\nimport {\n  MDBBtn,\n  MDBContainer,\n  MDBRow,\n  MDBCol,\n  MDBCard,\n  MDBCardBody,\n  MDBInput,\n  MDBCheckbox,\n  MDBIcon\n}\nfrom 'mdb-react-ui-kit';\n\nfunction SignIn() {\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [rememberMe, setRememberMe] = useState(false);\n\n  {/* \n  const handleSignIn = () => {\n    // Prepare the login data object\n    const loginData = {\n      email,\n      password,\n      rememberMe\n    };\n  \n    // Send the login request to the API\n    fetch(API_URL+'/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(loginData)\n    })\n      .then(response => response.json())\n      .then(data => {\n        // Check the response from the API\n        if (data.token) {\n          // Authentication successful, save the token to local storage\n          localStorage.setItem('token', data.token);\n          // Redirect to home page or desired route\n          window.location.href = '/home';\n        } else {\n          // Authentication failed, handle the error (e.g., display an error message)\n          console.error('Login failed:', data.error);\n        }\n      })\n      .catch(error => {\n        console.error('An error occurred:', error);\n      });\n  };\n  \n*/}\n\n  const { setErrors, renderFieldError, message, setMessage, navigate } = useForm();\n  const handleSignIn = (e) => {\n      e.preventDefault();\n      setErrors(null);\n      setMessage('');\n      // make request first to sanctum/csrf-cookie\n      axios.get(API_URL+'/sanctum/csrf-cookie', {withCredentials : false}).then(() => {\n         const payload = {\n            email,\n            password\n         };\n          if(rememberMe) {\n              payload.remember = true;\n          }\n          //axios.defaults.withCredentials = true;\n          axios.post(API_URL+'/api/login', payload).then(response => {\n            axios.post(API_URL+'/api/me').then(user => {\n              console.log(user);\n            })\n              if(response.data.user) {\n                  alert('Login success');\n                  navigate(from, { replace: true });\n              }\n          }).catch(error => {\n              console.log(error);\n              if(error.response) {\n                  if (error.response.data.message) {\n                      setMessage(error.response.data.message);\n                  }\n                  if (error.response.data.errors) {\n                      setErrors(error.response.data.errors);\n                  }\n              }\n          });\n      });\n  };\n\n\n  return (\n\n    \n    <MDBContainer fluid className='p-4 background-radial-gradient overflow-hidden'>\n\n      <MDBRow>\n\n        <MDBCol md='6' className='text-center text-md-start d-flex flex-column justify-content-center'>\n\n          <h1 className=\"my-5 display-3 fw-bold ls-tight px-3\" style={{color: 'hsl(218, 81%, 95%)'}}>\n            The best offer <br />\n            <span style={{color: 'hsl(218, 81%, 75%)'}}>for your business</span>\n          </h1>\n\n          <p className='px-3' style={{color: 'hsl(218, 81%, 85%)'}}>\n            Lorem ipsum dolor sit amet consectetur adipisicing elit.\n            Eveniet, itaque accusantium odio, soluta, corrupti aliquam\n            quibusdam tempora at cupiditate quis eum maiores libero\n            veritatis? Dicta facilis sint aliquid ipsum atque?\n          </p>\n\n        </MDBCol>\n\n        <MDBCol md='6' className='position-relative'>\n\n          <div id=\"radius-shape-1\" className=\"position-absolute rounded-circle shadow-5-strong\"></div>\n          <div id=\"radius-shape-2\" className=\"position-absolute shadow-5-strong\"></div>\n\n          <MDBCard className='my-5 bg-glass'>\n            <MDBRow>\n              <MDBCol>\n                {\n                    message && <div className=\"alert alert-danger\">{message}</div>\n                }\n              </MDBCol>\n            </MDBRow>\n            <MDBCardBody className='p-5'>\n              <MDBInput\n                wrapperClass='mb-4'\n                label='Email'\n                id='form3'\n                type='email'\n                required\n                autoComplete=\"email\"\n                value={email}\n                autoFocus\n                onChange={(e) => setEmail(e.target.value)}\n              />\n              <MDBInput\n                wrapperClass='mb-4'\n                label='Password'\n                id='form4'\n                type='password'\n                required\n                autoComplete=\"current-password\" \n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              <div className=\"d-flex justify-content-between mx-4 mb-4\">\n                <MDBCheckbox name='flexCheck' value={rememberMe}  onChange={(e) => setRememberMe(e.target.value)} id='flexCheckDefault' label='Remember me' />\n                <a href=\"!#\">Forgot password?</a>\n              </div>\n              \n              <MDBBtn className='w-100 mb-4' size='md' onClick={handleSignIn}>sign in</MDBBtn>\n\n              <div className=\"d-flex text-center justify-content-center\">\n\n                <p>Need to create account ? </p>\n                <MDBBtn tag='a' href='/SignUp' color='none' className='mx-3' style={{ color: '#1266f1' }}>\n                  Sign Up\n                </MDBBtn>\n\n              </div>\n\n            </MDBCardBody>\n          </MDBCard>\n\n        </MDBCol>\n\n      </MDBRow>\n\n    </MDBContainer>\n  );\n}\n\nexport default SignIn;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}